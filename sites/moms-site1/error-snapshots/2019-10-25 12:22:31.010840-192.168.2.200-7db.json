{
 "etype": "IOError",
 "evalue": "IOError(\"wkhtmltopdf exited with non-zero code 1. error:\\nThe switch --footer-html, is not support using unpatched qt, and will be ignored.The switch --print-media-type, is not support using unpatched qt, and will be ignored.The switch --disable-smart-shrinking, is not support using unpatched qt, and will be ignored.QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-umoms'\\nqt.qpa.screen: QXcbConnection: Could not connect to display \\nCould not connect to any X display.\\n\",)",
 "exception": {
  "args": "('wkhtmltopdf exited with non-zero code 1. error:\\n... to display \\nCould not connect to any X display.\\n',)",
  "errno": "None",
  "filename": "None",
  "message": "'wkhtmltopdf exited with non-zero code 1. error:\\n... to display \\nCould not connect to any X display.\\n'",
  "strerror": "None"
 },
 "frames": [
  {
   "call": "(request=<Request 'http://erp.mybusiness.com/api/method/frappe.utils.print_format.report_to_pdf' [POST]>)",
   "dump": {
    "frappe. api": "<module 'frappe.api' from '/home/umoms/moms-bench/apps/frappe/frappe/api.pyc'>",
    "frappe.api. handle": "<function handle>",
    "global frappe": "<module 'frappe' from '/home/umoms/moms-bench/apps/frappe/frappe/__init__.pyc'>",
    "response": "None"
   },
   "file": "/home/umoms/moms-bench/apps/frappe/frappe/app.py",
   "func": "application",
   "lines": {
    "58": "",
    "59": "\t\telif frappe.request.path.startswith(\"/api/\"):",
    "60": "\t\t\tresponse = frappe.api.handle()",
    "61": "",
    "62": "\t\telif frappe.request.path.startswith('/backups'):"
   },
   "lnum": 60
  },
  {
   "call": "()",
   "dump": {
    "frappe. handler": "<module 'frappe.handler' from '/home/umoms/moms-bench/apps/frappe/frappe/handler.pyc'>",
    "frappe.handler. handle": "<function handle>",
    "global frappe": "<module 'frappe' from '/home/umoms/moms-bench/apps/frappe/frappe/__init__.pyc'>"
   },
   "file": "/home/umoms/moms-bench/apps/frappe/frappe/api.py",
   "func": "handle",
   "lines": {
    "53": "\tif call==\"method\":",
    "54": "\t\tfrappe.local.form_dict.cmd = doctype",
    "55": "\t\treturn frappe.handler.handle()",
    "56": "",
    "57": "\telif call==\"resource\":"
   },
   "lnum": 55
  },
  {
   "call": "()",
   "dump": {
    "cmd": "u'frappe.utils.print_format.report_to_pdf'",
    "data": "None",
    "global execute_cmd": "<function execute_cmd>"
   },
   "file": "/home/umoms/moms-bench/apps/frappe/frappe/handler.py",
   "func": "handle",
   "lines": {
    "20": "",
    "21": "\tif cmd!='login':",
    "22": "\t\tdata = execute_cmd(cmd)",
    "23": "",
    "24": "\t# data can be an empty string or list which are valid responses"
   },
   "lnum": 22
  },
  {
   "call": "(cmd=u'frappe.utils.print_format.report_to_pdf', from_async=False)",
   "dump": {
    "frappe. call": "<function call>",
    "frappe. form_dict": "{'cmd': u'frappe.utils.print_format.report_to_pd...  </body> </html> ', 'orientation': u'Landscape'}",
    "global frappe": "<module 'frappe' from '/home/umoms/moms-bench/apps/frappe/frappe/__init__.pyc'>",
    "method": "<function report_to_pdf>"
   },
   "file": "/home/umoms/moms-bench/apps/frappe/frappe/handler.py",
   "func": "execute_cmd",
   "lines": {
    "59": "\tis_whitelisted(method)",
    "60": "",
    "61": "\treturn frappe.call(method, **frappe.form_dict)",
    "62": "",
    "63": ""
   },
   "lnum": 61
  },
  {
   "call": "(fn=<function report_to_pdf>, *args=(), **kwargs={'cmd': u'frappe.utils.print_format.report_to_pdf', 'html': u'<!DOCTYPE html> <html lang=\"en\">   <head>     ...table>       </div>    </div>   </body> </html> ', 'orientation': u'Landscape'})",
   "dump": {
    "args": "()",
    "fn": "<function report_to_pdf>",
    "newargs": "{'html': u'<!DOCTYPE html> <html lang=\"en\">   <head>     ...table>       </div>    </div>   </body> </html> ', 'orientation': u'Landscape'}"
   },
   "file": "/home/umoms/moms-bench/apps/frappe/frappe/__init__.py",
   "func": "call",
   "lines": {
    "1036": "\tnewargs = get_newargs(fn, kwargs)",
    "1037": "",
    "1038": "\treturn fn(*args, **newargs)",
    "1039": "",
    "1040": "def get_newargs(fn, kwargs):"
   },
   "lnum": 1038
  },
  {
   "call": "(html=u'<!DOCTYPE html> <html lang=\"en\">   <head>     ...table>       </div>    </div>   </body> </html> ', orientation=u'Landscape')",
   "dump": {
    "frappe. local": "<werkzeug.local.Local object>",
    "frappe.local. response": "{u'docs': [], u'route': u'message', u'http_statu...40}, 'filename': u'report.pdf', u'type': u'page'}",
    "frappe.local.response. filecontent": "None",
    "global frappe": "<module 'frappe' from '/home/umoms/moms-bench/apps/frappe/frappe/__init__.pyc'>",
    "global get_pdf": "<function get_pdf>",
    "html": "u'<!DOCTYPE html> <html lang=\"en\">   <head>     ...table>       </div>    </div>   </body> </html> '",
    "orientation": "u'Landscape'"
   },
   "file": "/home/umoms/moms-bench/apps/frappe/frappe/utils/print_format.py",
   "func": "report_to_pdf",
   "lines": {
    "97": "\tmake_access_log(file_type='PDF', method='PDF', page=html)",
    "98": "\tfrappe.local.response.filename = \"report.pdf\"",
    "99": "\tfrappe.local.response.filecontent = get_pdf(html, {\"orientation\": orientation})",
    "100": "\tfrappe.local.response.type = \"pdf\"",
    "101": ""
   },
   "lnum": 99
  },
  {
   "call": "(html=u'<!DOCTYPE html>\\n<html lang=\"en\">\\n <head>\\n  ...</table>\\n   </div>\\n  </div>\\n </body>\\n</html>', options={u'background': None, u'cookie': [(u'sid', u'945337ed72e60daee5ca1bc8e73d87eddf69d8f855903a678005bb2b')], u'disable-javascript': u'', u'disable-local-file-access': u'', u'disable-smart-shrinking': u'', u'encoding': u'UTF-8', u'footer-html': u'/tmp/frappe-pdf-61e5614a1867a690997b9c27f69e12b3bd08ca88b8ed33c50f798156.html', u'images': None, u'margin-left': u'15mm', u'margin-right': u'15mm', ...}, output=None)",
   "dump": {
    "builtin False": "False",
    "filedata": "u''",
    "global pdfkit": "<module 'pdfkit' from '/home/umoms/moms-bench/env/src/pdfkit/pdfkit/__init__.pyc'>",
    "html": "u'<!DOCTYPE html>\\n<html lang=\"en\">\\n <head>\\n  ...</table>\\n   </div>\\n  </div>\\n </body>\\n</html>'",
    "options": "{u'background': None, u'cookie': [(u'sid', u'945337ed72e60daee5ca1bc8e73d87eddf69d8f855903a678005bb2b')], u'disable-javascript': u'', u'disable-local-file-access': u'', u'disable-smart-shrinking': u'', u'encoding': u'UTF-8', u'footer-html': u'/tmp/frappe-pdf-61e5614a1867a690997b9c27f69e12b3bd08ca88b8ed33c50f798156.html', u'images': None, u'margin-left': u'15mm', u'margin-right': u'15mm', ...}",
    "pdfkit. from_string": "<function from_string>"
   },
   "file": "/home/umoms/moms-bench/apps/frappe/frappe/utils/pdf.py",
   "func": "get_pdf",
   "lines": {
    "24": "\ttry:",
    "25": "\t\t# Set filename property to false, so no file is actually created",
    "26": "\t\tfiledata = pdfkit.from_string(html, False, options=options or {})",
    "27": "",
    "28": "\t\t# https://pythonhosted.org/PyPDF2/PdfFileReader.html"
   },
   "lnum": 26
  },
  {
   "call": "(input=u'<!DOCTYPE html>\\n<html lang=\"en\">\\n <head>\\n  ...</table>\\n   </div>\\n  </div>\\n </body>\\n</html>', output_path=False, options={u'background': None, u'cookie': [(u'sid', u'945337ed72e60daee5ca1bc8e73d87eddf69d8f855903a678005bb2b')], u'disable-javascript': u'', u'disable-local-file-access': u'', u'disable-smart-shrinking': u'', u'encoding': u'UTF-8', u'footer-html': u'/tmp/frappe-pdf-61e5614a1867a690997b9c27f69e12b3bd08ca88b8ed33c50f798156.html', u'images': None, u'margin-left': u'15mm', u'margin-right': u'15mm', ...}, toc=None, cover=None, css=None, configuration=None)",
   "dump": {
    "output_path": "False",
    "r": "<pdfkit.pdfkit.PDFKit object>",
    "r. to_pdf": "<bound method PDFKit.to_pdf of <pdfkit.pdfkit.PDFKit object>>"
   },
   "file": "/home/umoms/moms-bench/env/src/pdfkit/pdfkit/api.py",
   "func": "from_string",
   "lines": {
    "66": "               configuration=configuration)",
    "67": "",
    "68": "    return r.to_pdf(output_path)",
    "69": "",
    "70": ""
   },
   "lnum": 68
  },
  {
   "call": "(self=<pdfkit.pdfkit.PDFKit object>, path=False)",
   "dump": {
    "\"wkhtmltopdf exited with non-zero code {0}. error:\\n{1}\".format": "undefined",
    "builtin IOError": "<type 'exceptions.IOError'>",
    "exit_code": "1",
    "stderr": "'The switch --footer-html, is not support using u... to display \\nCould not connect to any X display.\\n'",
    "stderr. decode": "<built-in method decode of str object>"
   },
   "file": "/home/umoms/moms-bench/env/src/pdfkit/pdfkit/pdfkit.py",
   "func": "to_pdf",
   "lines": {
    "141": "",
    "142": "        if exit_code != 0:",
    "143": "            raise IOError(\"wkhtmltopdf exited with non-zero code {0}. error:\\n{1}\".format(exit_code, stderr.decode(\"utf-8\")))",
    "144": "",
    "145": "        # Since wkhtmltopdf sends its output to stderr we will capture it"
   },
   "lnum": 143
  }
 ],
 "locals": {
  "args": "[u'/usr/bin/wkhtmltopdf', u'--page-size', 'A4', u'--orientation', 'Landscape', u'--disable-javascript', u'--encoding', 'UTF-8', u'--margin-right', '15mm', u'--quiet', u'--footer-html', '/tmp/frappe-pdf-61e5614a1867a690997b9c27f69e12b3bd08ca88b8ed33c50f798156.html', u'--margin-top', '15mm', u'--cookie', u'sid', u'945337ed72e60daee5ca1bc8e73d87eddf69d8f855903a678005bb2b', u'--disable-local-file-access', u'--background', ...]",
  "exit_code": "1",
  "input": "'<!DOCTYPE html>\\n<html lang=\"en\">\\n <head>\\n  <meta...\\n    </table>\\n   </div>\\n  </div>\\n </body>\\n</html>'",
  "path": "False",
  "result": "<subprocess.Popen object>",
  "self": "<pdfkit.pdfkit.PDFKit object>",
  "stderr": "'The switch --footer-html, is not support using u... to display \\nCould not connect to any X display.\\n'",
  "stdout": "''"
 },
 "pyver": "Python 2.7.15rc1: /home/umoms/moms-bench/env/bin/python (prefix: /home/umoms/moms-bench/env)",
 "timestamp": "2019-10-25 12:22:31.015788",
 "traceback": "Traceback (most recent call last):\n  File \"/home/umoms/moms-bench/apps/frappe/frappe/app.py\", line 60, in application\n    response = frappe.api.handle()\n  File \"/home/umoms/moms-bench/apps/frappe/frappe/api.py\", line 55, in handle\n    return frappe.handler.handle()\n  File \"/home/umoms/moms-bench/apps/frappe/frappe/handler.py\", line 22, in handle\n    data = execute_cmd(cmd)\n  File \"/home/umoms/moms-bench/apps/frappe/frappe/handler.py\", line 61, in execute_cmd\n    return frappe.call(method, **frappe.form_dict)\n  File \"/home/umoms/moms-bench/apps/frappe/frappe/__init__.py\", line 1038, in call\n    return fn(*args, **newargs)\n  File \"/home/umoms/moms-bench/apps/frappe/frappe/utils/print_format.py\", line 99, in report_to_pdf\n    frappe.local.response.filecontent = get_pdf(html, {\"orientation\": orientation})\n  File \"/home/umoms/moms-bench/apps/frappe/frappe/utils/pdf.py\", line 26, in get_pdf\n    filedata = pdfkit.from_string(html, False, options=options or {})\n  File \"/home/umoms/moms-bench/env/src/pdfkit/pdfkit/api.py\", line 68, in from_string\n    return r.to_pdf(output_path)\n  File \"/home/umoms/moms-bench/env/src/pdfkit/pdfkit/pdfkit.py\", line 143, in to_pdf\n    raise IOError(\"wkhtmltopdf exited with non-zero code {0}. error:\\n{1}\".format(exit_code, stderr.decode(\"utf-8\")))\nIOError: wkhtmltopdf exited with non-zero code 1. error:\nThe switch --footer-html, is not support using unpatched qt, and will be ignored.The switch --print-media-type, is not support using unpatched qt, and will be ignored.The switch --disable-smart-shrinking, is not support using unpatched qt, and will be ignored.QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/runtime-umoms'\nqt.qpa.screen: QXcbConnection: Could not connect to display \nCould not connect to any X display.\n\n"
}